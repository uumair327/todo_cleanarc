#!/bin/bash

# Git pre-commit hook for color validation
# This hook runs color validation before each commit to prevent
# hardcoded colors from being committed to the repository.

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo -e "${YELLOW}Running pre-commit color validation...${NC}"

# Get the directory of this script
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Run color validation in pre-commit mode
if "$SCRIPT_DIR/validate_colors.sh" --pre-commit; then
    echo -e "${GREEN}✅ Color validation passed${NC}"
    exit 0
else
    echo -e "${RED}❌ Color validation failed${NC}"
    echo -e "${YELLOW}Commit blocked due to hardcoded colors.${NC}"
    echo -e "${YELLOW}Please replace hardcoded colors with semantic color tokens.${NC}"
    echo -e "${YELLOW}Run 'dart scripts/validate_colors.dart' for detailed information.${NC}"
    exit 1
fi